{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte",
    "../../Box.svelte"
  ],
  "sourcesContent": [
    "<script>\n    import {onMount} from \"svelte\";\n    import Box from \"./Box.svelte\"\n\n    let source_server = 'http://0.0.0.0:8081'\n    let ims = {}            // ret dict\n    let imslen = 0\n\n    let filter_label = 'none'        //\n    let filter_value = 'all'\n    let filter_values = []\n    let filter_size = 'none'  // up low\n    let filter_textes = []\n\n    let counts_table = ''\n\n    let seek_label = 'none'\n    let seek_only_clear = 'no'\n    let seekvalues = []\n    let seekvalue = ''\n    let seekrec = {}\n    let seek_resp = {}\n\n    let index = 0\n    let images = []\n    let all_labels = []\n    let label_data = {}\n\n    let key;\n    let keyCode;\n    let nums = [96, 97, 98, 99, 100, 101, 102, 103, 104, 105]\n    let nums2 = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57]\n\n    let storetext = 'store:'\n    let store_rec = {}\n\n    async function read_label() {\n        const res = await fetch(`${source_server}/get_label_value_on_image/${seek_label}/${images[index]}`)\n        seekrec = await res.json()\n        seekvalue = seekrec.imlabel\n        console.log('seelvalue=', seekvalue)\n    }\n\n    function on_seek() {\n        console.log('seek')\n        read_label()\n    }\n\n\n    function handleKeydown(event) {\n        key = event.key;\n        keyCode = event.keyCode;\n        console.log('key=', key, ' keycode=', keyCode)\n        if ((keyCode === 37) && (index > 0)) {\n            index--;\n            on_seek()\n        }\n        if ((keyCode === 39) && (index < imslen)) {\n            index++;\n            on_seek()\n        }\n        if ((keyCode === 32) && (index < imslen)) {\n            index++;\n            on_seek()\n        }\n        if (nums.includes(keyCode) && ((keyCode - 96) < seekvalues.length)) {\n            seekvalue = seekvalues[keyCode - 96];\n            set_new_label()\n        }\n        if (nums2.includes(keyCode) && ((keyCode - 48) < seekvalues.length)) {\n            seekvalue = seekvalues[keyCode - 48];\n            set_new_label()\n        }\n        if ((keyCode === 83) && (seek_label !== 'none')) {\n            seek_store()\n        }\n    }\n\n\n    async function loadData() {\n        console.log('in', filter_label, filter_value, seek_label)\n        const res = await fetch(`${source_server}/set_filter/${filter_label}/${filter_value}/${seek_label}/${seek_only_clear}/${filter_size}`);\n        ims = await res.json()\n        console.log('ims', ims)\n        images = ims.images\n        imslen = images.length\n        index = 0\n        all_labels = ims.labels\n        label_data = ims.label\n        filter_values = ims.values\n        filter_values.push('all')\n        filter_values.push('to_check')\n        filter_textes = ims.text\n        console.log('filtertextes =', filter_textes)\n        seekvalues = ims.seekvalues\n        counts_table = ims.counts\n        console.log(\"labelvalues =\", filter_values)\n        console.log('set filter')\n        read_label()\n    }\n\n    onMount(async () => {\n        await loadData()\n    });\n\n    async function set_new_label() {\n        const res = await fetch(`${source_server}/set_value/${images[index]}/${seek_label}/${seekvalue}`)\n        seek_resp = await res.json()\n        if (seek_resp.res !== 'ok') {\n            alert(seek_resp.res)\n        }\n        console.log('set_new_label=', seek_resp)\n        console.log(seek_resp)\n    }\n\n    async function seek_store() {\n        console.log(`storetext ${source_server}/store_label/${seek_label}`)\n        const res = await fetch(`${source_server}/store_label/${seek_label}`)\n        store_rec = await res.json()\n        storetext = store_rec.res\n        console.log('storetext:', storetext, 'label:', seek_label)\n        setTimeout(function () {\n            storetext = 'store';\n            console.log('storetext finish')\n        }, 3000)\n\n    }\n\n    console.log('started')\n\n\n</script>\n<style>\n\n    .label {\n        background-color: #bbbcc2;\n    }\n\n    .active {\n        background-color: #ff3e00;\n        color: white;\n        font-weight: bold;\n        font-size: x-large;\n    }\n\n    .selected {\n        background-color: green;\n        color: white;\n    }\n\n    img {\n        height: 50vh;\n    }\n\n    div {\n        display: flex;\n        height: 100%;\n        align-items: center;\n        justify-content: center;\n        flex-direction: column;\n    }\n\n    kbd {\n        background-color: #eee;\n        border-radius: 4px;\n        font-size: 6em;\n        padding: 0.2em 0.5em;\n        border-top: 5px solid rgba(255, 255, 255, 0.5);\n        border-left: 5px solid rgba(255, 255, 255, 0.5);\n        border-right: 5px solid rgba(0, 0, 0, 0.2);\n        border-bottom: 5px solid rgba(0, 0, 0, 0.2);\n        color: #555;\n    }\n\n    table, td, tr {\n        border-width: 0;\n    }\n\n    /*.dataframe th {*/\n    /*\tborder-width: 1px;*/\n    /*\tpadding: 8px;*/\n    /*\tborder-style: solid;*/\n    /*\tborder-color: #3A3A3A;*/\n    /*\tbackground-color: #B3B3B3;*/\n    /*}*/\n    /*td {*/\n    /*    border-width: 1px;*/\n    /*    padding: 8px;*/\n    /*    border-style: solid;*/\n    /*    border-color: #3A3A3A;*/\n    /*    background-color: #ffffff;*/\n    /*}*/\n\n</style>\n\n<svelte:window on:keydown={handleKeydown}/>\n\n\n<Box>\n    <h3>select label to edit </h3>\n    <button disabled='{seek_label === \"none\"}' on:click=\"{() => {seek_store()}}\">{storetext}:{seek_label}</button>\n    {#each all_labels as ilabel}\n        <button class=\"label\" class:selected=\"{seek_label === ilabel}\"\n                on:click=\"{() => {seek_label = ilabel;loadData()}}\">{ilabel}</button>\n    {/each}\n    <button class:selected=\"{seek_only_clear === 'yes'}\" on:click=\"{() => {seek_only_clear = 'yes';loadData()}}\">new\n    </button>\n    <button class:selected=\"{seek_only_clear === 'no'}\" on:click=\"{() => {seek_only_clear = 'no';loadData()}}\">all\n    </button>\n    <br>\n\n</Box>\n\n<Box>\n    <table>\n        <tr>\n            <td>\n                {#if images[index]=undefined}\n                <img src=\"{source_server}/marked_image/{images[index]}\" alt=\"{images[index]}\">{/if}<br>\n            </td>\n            <td>\n                {#each seekvalues as sv, nn}\n                    <button class:active=\"{seekvalue === sv}\" on:click=\"{() => {seekvalue = sv; set_new_label()}}\">({nn}\n                        ) {sv}</button><br>\n                {/each}<br>\n                <button class:active=\"{seekvalue === 'DELETE'}\" on:click=\"{() => {seekvalue = 'DELETE'; set_new_label()}}\">Del</button><br>\n                {#if filter_value === 'to_check'}\n                    <br>{filter_textes[index]}\n                {/if}\n            </td>\n        </tr>\n    </table>\n\n\n    <button disabled='{index === 0}' on:click=\"{() => {index--; on_seek()}}\">prev</button>\n    {#if imslen > 100}\n        <button disabled='{index < 100}' on:click=\"{() => {index -= 100; on_seek()}}\">-100</button>\n    {/if}\n    {#if imslen > 1000}\n        <button disabled='{index < 1000}' on:click=\"{() => {index -= 1000; on_seek()}}\">-1000</button>\n    {/if}\n    {index} / {imslen}\n    {#if imslen > 1000}\n        <button disabled='{index > imslen - 1000}' on:click=\"{() => {index += 1000; on_seek()}}\">+1000</button>\n    {/if}\n    {#if imslen > 100}\n        <button disabled='{index > imslen - 100}' on:click=\"{() => {index += 100; on_seek()}}\">+100</button>\n    {/if}\n    <button disabled='{index === imslen}' on:click=\"{() => {index++; on_seek()}}\">next</button>\n</Box>\n\n<Box>\n    <h3>select labels filter: total {images.length} imgs</h3>\n    {#each all_labels as ilabel}\n        <button class=\"label\" class:selected=\"{filter_label === ilabel}\"\n                on:click=\"{() => {filter_label = ilabel; loadData()}}\">{ilabel}</button>\n    {/each}\n    <button class=\"label\" class:selected=\"{filter_label === 'none'}\"\n            on:click=\"{() => {filter_label = 'none'; loadData()}}\">All\n    </button>\n    <br>\n    {#if filter_label !== 'none'}\n    {#each filter_values as lv}\n        <button class:selected=\"{filter_value === lv}\" on:click=\"{() => {filter_value = lv; loadData()}}\">{lv}</button>\n    {/each}\n    {/if}\n    {#each ['up', 'low', 'none'] as lv}\n        <button class:selected=\"{filter_size === lv}\" on:click=\"{() => {filter_size = lv; loadData()}}\">{lv}</button>\n    {/each}\n\n\n</Box>\n<!--<Box>-->\n<!--    {@html counts_table}-->\n<!--</Box>-->\n<!--<Box>-->\n<!--    { counts_table}-->\n<!--</Box>-->",
    "<script>\n\texport let cls = 'box'\n</script>\n<style>\n\n\n\t.box {\n\t\tfloat: left;\n\t\tdisplay: block;\n\t\tborder: 1px solid #aaa;\n\t\tborder-radius: 2px;\n\t\tbox-shadow: 2px 2px 8px rgba(0,0,0,0.1);\n\t\tpadding: 0.5em;\n\t\t/*padding: 1em;*/\n\t\t/*margin: 0 0 1em 0;*/\n\t\tmargin: 3px;\n\t\tmin-width: 550px;\n\t}\n\n\t.box_instance {\n\n\t\t/*width: 300px;*/\n\t\tfloat: left;\n\t\tdisplay: block;\n\t\tborder: 1px solid #aaa;\n\t\tborder-radius: 2px;\n\t\tbox-shadow: 2px 2px 8px rgba(0,0,0,0.1);\n\t\tpadding: 1em;\n\t\t/*margin: 0 0 1em 0;*/\n\t\tmargin: 3px;\n\t\tmin-width: 550px;\n\t\t/*background-color: #cba39e;*/\n\t}\n\t.box_yellow {\n\n\t\t/*width: 300px;*/\n\t\tfloat: left;\n\t\tdisplay: block;\n\t\tborder: 1px solid #aaa;\n\t\tborder-radius: 2px;\n\t\tbox-shadow: 2px 2px 8px rgba(0,0,0,0.1);\n\t\tpadding: 1em;\n\t\t/*margin: 0 0 1em 0;*/\n\t\tmargin: 3px;\n\t\tmin-width: 550px;\n\t\tbackground-color: #e0d5d3;\n\t}\n\n</style>\n\n<div class={cls}>\n\t<slot></slot>\n</div>"
  ],
  "names": [],
  "mappings": "AAsII,MAAM,eAAC,CAAC,AACJ,gBAAgB,CAAE,OAAO,AAC7B,CAAC,AAED,OAAO,eAAC,CAAC,AACL,gBAAgB,CAAE,OAAO,CACzB,KAAK,CAAE,KAAK,CACZ,WAAW,CAAE,IAAI,CACjB,SAAS,CAAE,OAAO,AACtB,CAAC,AAED,SAAS,eAAC,CAAC,AACP,gBAAgB,CAAE,KAAK,CACvB,KAAK,CAAE,KAAK,AAChB,CAAC,AAED,GAAG,eAAC,CAAC,AACD,MAAM,CAAE,IAAI,AAChB,CAAC,AAsBD,oBAAK,CAAE,iBAAE,CAAE,EAAE,eAAC,CAAC,AACX,YAAY,CAAE,CAAC,AACnB,CAAC;AC1KJ,IAAI,cAAC,CAAC,AACL,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,KAAK,CACd,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CACtB,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CACvC,OAAO,CAAE,KAAK,CAGd,MAAM,CAAE,GAAG,CACX,SAAS,CAAE,KAAK,AACjB,CAAC,AAED,aAAa,cAAC,CAAC,AAGd,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,KAAK,CACd,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CACtB,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CACvC,OAAO,CAAE,GAAG,CAEZ,MAAM,CAAE,GAAG,CACX,SAAS,CAAE,KAAK,AAEjB,CAAC,AACD,WAAW,cAAC,CAAC,AAGZ,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,KAAK,CACd,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CACtB,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CACvC,OAAO,CAAE,GAAG,CAEZ,MAAM,CAAE,GAAG,CACX,SAAS,CAAE,KAAK,CAChB,gBAAgB,CAAE,OAAO,AAC1B,CAAC"
}